<!DOCTYPE html>
<html>
	<head>
	</head>
	<body>
		<div id="CharCreator" class="CharCreator">
			<p class="CharCreator">Name: </p>
			<input type="text" id="playerName" class="CharCreator"/>
			<br class="CharCreator">
			<p class="CharCreator">Race: </p>
			<input type="text" id="playerRace" class="CharCreator"/>
			<br class="CharCreator">
			<p class="CharCreator">Gender: </p>
			<input type="text" id="playerGender" class="CharCreator"/>
			<br class="CharCreator">
			<input type="button" class="CharCreator" value="Create Character" onclick="makeCharacter(document.getElementById('playerName').value, document.getElementById('playerRace').value, document.getElementById('playerGender').value)"/>
		</div>
		<div class="CharStats" style="display:none">
			<p id="pStats" class="CharStats" style="display:none"></p>
		</div>
		<div class="playScreen">
			<input type="button" value="View Inventory" class="playScreen" onclick="viewInventory()" style="display:none"/>
			<input type="button" value="Enter Combat" class="playScreen" style="display:none"/>
			<input type="button" value="Save" class="playScreen" style="display:none" onclick="saveFile()"/>
		</div>
		<div class="inventoryScreen" style="display:none">
		<p class="inventoryScreen" style="display:none">Equipped Weapon:</p>
		<select class="inventoryScreen" id="weaponSelect"></select>
		<input type="button" value="Update Equipment" class="inventoryScreen" style="display:none" onclick=changeWeapon(document.getElementById('weaponSelect').options[document.getElementById('weaponSelect').selectedIndex].value) ></input>
		<input type="button" value="Back to Menu" class="inventoryScreen" style="display:none" onClick="toMenu()" />
		</div>
		<div class="combatScreen" style="display:none"></div>
		
	<script>
		class Weapon{
			constructor(name, damage, toHit){
				this.NAME=name;
				this.DAMAGE=damage;
				this.TOHIT=toHit;
			}
		}

		let fists= new Weapon("Fists",2,3);
		let sword = new Weapon("Sword",3,3);

		class Player{
			
			constructor(name, race, gender){
				this.NAME = name;
				this.RACE = race;
				this.GENDER = gender;
				this.XP=0;
				this.HP=10;
				this.WEAPON=fists;
				this.INVENTORY=[fists,sword];
			}
		}

		let Player1;
		let Enemies = [];

		const electron = require('electron');
		const {ipcRenderer} = electron;

		function makeCharacter(name, race, gender){
			Player1 = new Player(name, race, gender);
			clearScreen();
			viewCharStats();
			viewPlayScreen();
		}

		function clearScreen(){
			let CharCreate = document.getElementsByClassName("CharCreator");
			for(i=0;i<CharCreate.length;i++){
				CharCreate[i].style.display='none';
			}
			let playScreen = document.getElementsByClassName("playScreen");
			for(i=0;i<playScreen.length;i++){
				playScreen[i].style.display='none';
			}
			let invScreen = document.getElementsByClassName('inventoryScreen');
			for(i=0;i<invScreen.length;i++){
				invScreen[i].style.display='none';
			}
		}

		function viewCharStats(){
			let stats = document.getElementsByClassName('CharStats')
			for(i=0; i<stats.length;i++){
				stats[i].style.display = '';
				}
			document.getElementById('pStats').innerHTML = ("You are a " + Player1.RACE + " " + Player1.GENDER + " named " + Player1.NAME + ".");
		}

		function viewPlayScreen(){
			let playScreen = document.getElementsByClassName('playScreen');
			for(i=0;i<playScreen.length;i++){
				playScreen[i].style.display = "";
			}
		}

		function viewInventory(){
			clearScreen();
			let weapSelect=document.getElementById('weaponSelect');
			for(i=0;i<Player1.INVENTORY.length;i++){
				weapSelect.innerHTML+="<option value='" + Player1.INVENTORY[i].NAME + "'>" + Player1.INVENTORY[i].NAME + "</option>";
			}
			let invScreen = document.getElementsByClassName('inventoryScreen');
			for(i=0;i<invScreen.length;i++){
				invScreen[i].style.display="";
			}
		}
		
		function changeWeapon(weapName){
			for(i=0;i<Player1.INVENTORY.length;i++){
				if(Player1.INVENTORY[i].NAME==weapName){
					Player1.WEAPON=Player1.INVENTORY[i];
				}
			}
		}
		
		function saveFile(){
			let item = Player1
			ipcRenderer.send('Player:save', item);
		}

		function toMenu(){
			clearScreen();
			viewPlayScreen();
		}
	</script>
	</body>
</html>
